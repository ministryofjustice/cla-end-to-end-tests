version: '3.4'

services:
  cla-end-to-end:
    volumes:
      - .:/behave_local2
    stdin_open: true # docker run -i
    tty: true        # docker run -t
  clafrontend:
    build: https://github.com/ministryofjustice/cla_frontend.git#59c90f65a4c1bdd4e9e9eca78cbe7e1130dfabd0
  clabackend:
    build: https://github.com/ministryofjustice/cla_backend.git#ded2e016ddfd21197aa3291188ac4a5d36ac0da0
  clapublic:
    build: 
      context: https://github.com/ministryofjustice/cla_public.git#15d5775fde286eea9bbfeeaf184d915bc20f853b
      args:
        NODE_BASE_IMAGE: ${NODE_BASE_IMAGE:-node:10}
        ALPINE_BASE_IMAGE: ${ALPINE_BASE_IMAGE:-alpine:3.15}
  clasocketserver:
    build: https://github.com/ministryofjustice/cla_frontend.git#master:cla_socketserver
  fala:
    build: https://github.com/ministryofjustice/fala.git#master
